<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

  <link rel="stylesheet" href="../common/js/weui/weui.min.css">
  <link rel="stylesheet" type="text/css" href="../common/css/reset.css" />
  <link rel="stylesheet" type="text/css" href="../css/menuSigna.css" />

  <title>menuSigna</title>
  <style>
    ul,
    li {
      touch-action: auto;
    }
    .modal-body {
      height: 200px;
      padding: 10px;
      width: 100%;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>
  <div id="menuSigna">
    <template>
      <div class="headnav">
        <p class="headnav-history" onclick="javascript:history.back(-1);">&nbsp;</p>
        <p class="headnav-title">签名</p>
        <p class="headnav-home" onclick="location.href='menuNav.html' "><img src="./img/menu_home.png" alt=""></p>
      </div>
      <div class="modal-body">
        <div class="js-signature" id="mySignature"></div>
      </div>
      <div class="footer-button-two">
        <p @click="autographClick">签名</p>
        <p @click="configeAction">确认</p>
      </div>
    </template>
  </div>
</body>

<!-- 签名 -->
<script src="../common/js/jquery.min.js"></script>
<script src="../common/js/jq-signature.js"></script>
<script src="../common/js/WritingPad.js"></script>


<script src="../common/js/vue.js"></script>
<script src="../common/js/layer/layer.js"></script>
<script src="../common/js/common.js"></script>
<script type="text/javascript" src="../common/js/weui/weui.min.js"></script>

<script type="text/javascript">
  var vueDoms = {};
  window.onload = function() {
    vueDoms = new Vue({
      el: '#menuSigna',
      data() {
        return {
          ulHeight: 200,
          searchName: '',
          searchTime: '',
          searchType: '',
          searchTypeVal: '',
          ajaxCommonHost: '',
          userid: '',
          saleList: [],
          pageInfo: {
            currentPage: 1,
            totalPage: 1,
          },
        }
      },
      mounted() {
        this.isLogin();
      },
      methods: {
        isLogin() {
          this.ajaxCommonHost = localStorage.getItem('ajaxCommonHost');
          this.userid = localStorage.getItem('userid');
          this.ulHeight = document.documentElement.clientHeight - 56 - 81 - 15 - 50 - 5 - 41; // body - header - search - div - footer - null
          // this.ulHeight = document.documentElement.clientHeight - 56 - 122 - 15 - 50 - 5; // body - header - search(122: searchName) - div - footer - null
          this.listDialogBeforAction();
        },
        configeAction() {
          var dataUrl = $('.js-signature').jqSignature('getDataURL');
          console.log(dataUrl);
        },
        autographClick() {
          // console.log("pv", this.pv)
          // this.wv.hide();
          // this.autograph = true
          var wp = new WritingPad();
          this.initSignature()
        },
        initSignature() {
          var _this = this
          if (window.requestAnimFrame) {
            var width = $(document).width() - 20
            var signature = $("#mySignature");
            signature.jqSignature({
              height: 200,
              width: width,
              border: '1px solid #000',
              background: '#16A085',
              lineColor: '#000',
              lineWidth: 5,
              autoFit: false
            });
            signature.on("jq.signature.changmove", function() {
              _this.pv = 1
            })
            //{ width: 600, height: 200, border: '1px solid red', background: '#16A085', lineColor: '#ABCDEF', lineWidth: 2, autoFit: true }
          } else {

            alert("请加载jq-signature.js");
            return;
          }
        },
        listDialogBeforAction(parameters) {
          // var _this = this, data = parameters ? parameters : {};
          // $.ajax({
          //   type: 'POST',
          // 	url: this.ajaxCommonHost+'/Api/orderQuery.do',
          //   data: data,
          // 	dataType:'json',
          // 	success:function(data){
          //     console.log(data);
          //     if (data.success) {
          //       console.log(data);
          //       layer.closeAll();
          //     } else if (!data.success) {
          //       layer.closeAll();
          //       layer.open({content:data.message, skin: 'msg', style: 'top:-200px;', time: 3});
          //     }
          // 	},
          //   error: function(XMLHttpRequest, textStatus, errorThrown){
          //     layer.closeAll();
          //     layer.open({content: errorThrown, skin: 'msg', style: 'top:-200px;', time: 3});
          //   },
          // });
        },

      },
    })
  }
</script>

</html>
