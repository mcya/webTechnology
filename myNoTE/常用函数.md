```js
// var type = getUrlParams('type')
function getUrlParams(objName) { // 获取URl
  var data = window.location.href;
  if (data.indexOf("?") < 0)
    return undefined; //判断是否存在参数
  var allParamsArr = data.split("?")[1].split("&"),
    returnObj = {};
  if (allParamsArr.length == 0)
    return undefined; //参数是否带惨，狗屁的有的人无聊带问号不带参数的
  for (var i = 0; i < allParamsArr.length; i++) {
    returnObj[`${allParamsArr[i].split("=")[0]}`] = allParamsArr[i].split("=")[1]
  }
  return returnObj[`${objName}`]
}
```

```js
// var todays = formatDate(new Date(), 'yyyy-MM-dd')
function formatDate(date, fmts) { //时间格式化
  var fmt = fmts ? fmts : 'yyyy-MM-dd';
  if (/(y+)/.test(fmt)) {
    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));
  }
  var o = {
    'M+': date.getMonth() + 1,
    'd+': date.getDate(),
    'h+': date.getHours(),
    'm+': date.getMinutes(),
    's+': date.getSeconds()
  };
  for (var k in o) {
    if (new RegExp(`(${k})`).test(fmt)) {
      var str = o[k] + '';
      fmt = fmt.replace(
        RegExp.$1, (RegExp.$1.length === 1)
        ? str
        : padLeftZero(str));
    }
  }
  return fmt;
};

function padLeftZero(str) {
  return ('00' + str).substr(str.length);
}
```

```js
function dcmAdd(arg1, arg2){ //加法精度
  var r1,r2,m;
  try{r1=arg1.toString().split(".")[1].length;}catch(e){r1=0;}
  try{r2=arg2.toString().split(".")[1].length;}catch(e){r2=0;}
  m=Math.pow(10,Math.max(r1,r2));
  return (accMul(arg1,m)+accMul(arg2,m))/m;
}
```

```js
function numSub(num1, num2) { //减法精度 num1 - num2
	var baseNum, baseNum1, baseNum2;
	var precision;// 精度
	try {
		baseNum1 = num1.toString().split(".")[1].length;
	} catch (e) {
		baseNum1 = 0;
	}
	try {
		baseNum2 = num2.toString().split(".")[1].length;
	} catch (e) {
		baseNum2 = 0;
	}
	baseNum = Math.pow(10, Math.max(baseNum1, baseNum2));
	precision = (baseNum1 >= baseNum2) ? baseNum1 : baseNum2;
	return ((num1 * baseNum - num2 * baseNum) / baseNum).toFixed(precision);
}
```

```js
// var array = [0.97, 0.99, 0.99], val=1, vals=1;
// for (var i = 0; i < array.length; i++) {
//     val *= array[i];
// 	vals = accMul(array[i], vals)
// }
function accMul(arg1,arg2) { //乘法精度 arg1 * arg2
  var m=0,s1=arg1.toString(),s2=arg2.toString();
  try{m+=s1.split(".")[1].length}catch(e){}
  try{m+=s2.split(".")[1].length}catch(e){}
  return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)
}
```

```js
function accDiv(arg1,arg2){ //除法精度 arg1 / arg2
  var t1=0,t2=0,r1,r2;
  try{t1=arg1.toString().split(".")[1].length}catch(e){}
  try{t2=arg2.toString().split(".")[1].length}catch(e){}
  with(Math){
    r1=Number(arg1.toString().replace(".",""))
    r2=Number(arg2.toString().replace(".",""))
    return (r1/r2)*pow(10,t2-t1);
  }
}

```

```js
function encryptionCode(str) { //加密
  var encode = "";
  str = String(str);
  for (var i = 0; i < str.length; i++) {
    var code = str.charCodeAt(i);
    encode += code;
    encode += ",";
  }
  return encode
}
```

```js
function decryptCode(str) {//解密
  if (str && str.indexOf(',')>=0) {
    var arr = str.split(","), decode = "";
    for (var i = 0; i < arr.length; i++){
      var code = parseInt(arr[i]);
      decode += String.fromCharCode(code);
    }
    return decode;
  }
}
```

```js
function IntegerToFloat(num){ // 1.00 1.10  1.11
  if (num == null || num == 'NaN') {
    return '';
  }
  const arr = num.toString().split('.');
  if (arr.length === 1) {
    return `${num}.00`;
  } else if (arr.length === 2 && arr[1].length === 1) {
    return `${num}0`;
  } else {
    return num;
  }
}
```

```js
function changeNum(value) { //value  -限制
  //如果用户第一位输入的是小数点，则重置输入框内容
  var value = String(value)
  if (value != '' && value.substr(0, 1) == '.') {
    value = "";
  }
  value = value.replace(/^0*(0\.|[1-9])/, '$1'); //粘贴不生效
  value = value.replace(/[^\d.]/g, ""); //清除“数字”和“.”以外的字符
  value = value.replace(/\.{2,}/g, "."); //只保留第一个. 清除多余的
  value = value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");
  value = value.replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3'); //只能输入两个小数
  // if (value.indexOf(".") < 0 && value != "") { //以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额
  //   if (value.substr(0, 1) == '0' && value.length == 2) {
  //     value = value.substr(1, value.length);
  //   }
  // }
  return value
}
```

```js
function getUuid() { //uuid
  var nowDate = new Date().getTime();
  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = (nowDate + Math.random()*16)%16 | 0;
    nowDate = Math.floor(nowDate/16);
    return (c=='x' ? r : (r&0x3|0x8)).toString(16);
  });
  return uuid;
}
```

```js
// 数组中对象 去重  ==  [obj, obj]
// 方案一:  两个for循环，寻找相等项，且去掉
// 核心函数:
var n = 0;
objs.map((items) => {
  n++;
  if (item.CLIENTID == items.CLIENTID) { objs.splice(n - 1, 1) }; //重复项从数组中去掉
});
```


```js
// 数组中对象 去重  ==  [obj, obj]
// 方案二:  函数去除
// _objIsInArray(array[i], [], '需要对比的属性名，如id name code等')
function _objIsInArray(obj, arr, attr){
  let tmpStatus=false;
  for(let j=0;j<arr.length;j++){
    if(obj[`${attr}`] == arr[j][`${attr}`]) {
      return j;
      break;
    }else{
      tmpStatus=false;
    }
  }
  if(!tmpStatus){
    return -1;
  }
}

// 使用：
var nArr=[
  { id:10001, name:'张三' },
  { id:10001, name:'李四' },
  { id:10001, name:'张三' },
  { id:10003, name:'王五' },
  { id:10003, name:'赵六' },
  { id:10003, name:'王五' },
  { id:10006, name:'zuqi'}
];
var newArr=[];
for(let i=0;i<nArr.length;i++){
  if(_objIsInArray(nArr[i], newArr, 'id') ==-1){
     newArr.push(nArr[i]);
  }else{
    console.log('对象已存在');
  }
}
console.log(newArr);
```
